<!-- <br>
<nav class="navbar navbar-expand-lg navbar-light bg-light px-3 shadow-sm w-100">
  <div class="d-flex justify-content-between align-items-center w-100">
    
    <app-user-bar-control
      [title]="pageTitle"
      [subtitle]="pageSubtitle"
      [showBackButton]="showBackFlag"
      [showSubtitle]="false">
    </app-user-bar-control>

    <button class="btn btn-primary" (click)="openAddUserModal()">
      <i class="bi bi-plus-lg"></i> Add User
    </button>

  </div>
</nav>

<br>


  <div class="row">
    <div class="col-12">
        <table id="example" class="table table-striped table-bordered w-100">
          <thead class="table-light">
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users$ | async">
              
              <td>
                <a [routerLink]="['/view-user']" [queryParams]="{ userId: user.id }" class="text-decoration-none">
                 {{ user.firstName }} {{ user.lastName }}
                </a>
              </td>
              <td>{{ user.email }}</td>

             <td>
  <div class="dropdown">
    <button 
      class="btn btn-primary btn-sm dropdown-toggle" 
      type="button" 
      data-bs-toggle="dropdown" 
      aria-expanded="false">
      Actions
    </button>
    <ul class="dropdown-menu">
      <li>
        <button 
  class="dropdown-item text-primary" 
  (click)="viewDetails(user.id)">
  View Licenses
</button>
      </li>
      <li>
        <button 
          class="dropdown-item text-danger" 
          (click)="confirmDelete(user.id!)">
          Delete
        </button>
      </li>
    </ul>
  </div>
 </td>

            </tr>
          </tbody>
    <app-add-profile 
   *ngIf="showAddProfile"
   class="modal-overlay"
   (closed)="closeAddProfile()">
</app-add-profile>

        </table>

       
      
      </div> 
    </div> -->















 <br>
<nav class="navbar navbar-expand-lg navbar-light bg-light px-3 shadow-sm w-100">
  <div class="d-flex justify-content-between align-items-center w-100">
    
    <app-user-bar-control
      [title]="pageTitle"
      [subtitle]="pageSubtitle"
      [showBackButton]="showBackFlag"
      [showSubtitle]="false">
    </app-user-bar-control>

    <button class="btn btn-primary" (click)="openAddUserModal()">
      <i class="bi bi-plus-lg"></i> Add User
    </button>

  </div>
</nav>

<br> 

<!--<div class="row">
  <div class="col-12">

    <div class="d-flex justify-content-end mb-2 align-items-center">
      <span class="me-3">Total Pages: {{ totalPages }}</span>
      <button class="btn btn-outline-secondary btn-sm" (click)="toggleViewAll()">
        {{ viewAll ? 'Paginate' : 'View All' }}
      </button>
    </div>
      <table id="example" class="table table-striped table-bordered w-100">
        <thead class="table-light">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of pagedUsers">
            <td>
              <a [routerLink]="['/view-user']" [queryParams]="{ userId: user.id }" class="text-decoration-none">
               {{ user.firstName }} {{ user.lastName }}
              </a>
            </td>
            <td>{{ user.email }}</td>

            <td>
              <div class="dropdown">
                <button 
                  class="btn btn-primary btn-sm dropdown-toggle" 
                  type="button" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false">
                  Actions
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <button 
                      class="dropdown-item text-primary" 
                      (click)="viewDetails(user.id)">
                      View Licenses
                    </button>
                  </li>
                  <li>
                    <button 
                      class="dropdown-item text-danger" 
                      (click)="confirmDelete(user.id!)">
                      Delete
                    </button>
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        </tbody>
      </table> -->

      <!-- Pagination Controls -->
      <!-- <nav *ngIf="totalPages > 1" aria-label="Page navigation">
        <ul class="pagination justify-content-end mb-0">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
          </li>

          <li class="page-item" 
              *ngFor="let page of pages" 
              [class.active]="page === currentPage">
            <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
          </li>

          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
          </li>
        </ul>
      </nav> -->
<!-- 
<div class="d-flex justify-content-end mt-2">
      <nav *ngIf="totalPages > 1" aria-label="Page navigation">
        <ul class="pagination mb-0">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
          </li>

          <li class="page-item" 
              *ngFor="let page of pages" 
              [class.active]="page === currentPage">
            <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
          </li>

          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
          </li>
        </ul>
      </nav>
    </div>




      <app-add-profile 
        *ngIf="showAddProfile"
        class="modal-overlay"
        (closed)="closeAddProfile()">
      </app-add-profile>

  </div> 
</div> -->


<div class="row">
  <div class="col-12">

    <div class="d-flex justify-content-end mb-2 align-items-center">
      <span class="me-3">Total Pages: {{ totalPages }}</span>
      <button class="btn btn-outline-secondary btn-sm" (click)="toggleViewAll()">
        {{ viewAll ? 'Paginate' : 'View All' }}
      </button>
    </div>

    <!-- Table container with scroll when viewAll is active -->
    <div [ngStyle]="viewAll ? {'max-height': '500px', 'overflow-y': 'auto'} : {}">
      <table id="example" class="table table-striped table-bordered w-100 mb-0">
        <thead class="table-light" [ngStyle]="viewAll ? {'position': 'sticky', 'top': '0', 'z-index':'10', 'background':'#f8f9fa'} : {}">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of pagedUsers">
            <td>
              <a [routerLink]="['/view-user']" [queryParams]="{ userId: user.id }" class="text-decoration-none">
               {{ user.firstName }} {{ user.lastName }}
              </a>
            </td>
            <td>{{ user.email }}</td>

            <td>
              <div class="dropdown">
                <button 
                  class="btn btn-primary btn-sm dropdown-toggle" 
                  type="button" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false">
                  Actions
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <button 
                      class="dropdown-item text-primary" 
                      (click)="viewDetails(user.id)">
                      View Licenses
                    </button>
                  </li>
                  <li>
                    <button 
                      class="dropdown-item text-danger" 
                      (click)="confirmDelete(user.id!)">
                      Delete
                    </button>
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination Controls lower-right -->
    <div class="d-flex justify-content-end mt-2">
      <nav *ngIf="!viewAll && totalPages > 1" aria-label="Page navigation">
        <ul class="pagination mb-0">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
          </li>

          <li class="page-item" 
              *ngFor="let page of pages" 
              [class.active]="page === currentPage">
            <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
          </li>

          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
          </li>
        </ul>
      </nav>
    </div>

    <app-add-profile 
      *ngIf="showAddProfile"
      class="modal-overlay"
      (closed)="closeAddProfile()">
    </app-add-profile>

  </div> 
</div>
